<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gargolas Community | MauroAKD</title>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Montserrat:wght@300;600;900&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        :root {
            --gold: #d4af37;
            --black: #050505;
            --dark: #121212;
            --gold-grad: linear-gradient(135deg, #d4af37 0%, #f9e2af 50%, #b8860b 100%);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--black); color: white; font-family: 'Montserrat', sans-serif; overflow-x: hidden; }

        /* NAVBAR */
        .navbar {
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 5%; background: rgba(0,0,0,0.9);
            border-bottom: 1px solid rgba(212,175,55,0.3);
            position: fixed; width: 100%; z-index: 1000; backdrop-filter: blur(10px);
        }
        .logo { font-family: 'Syncopate', sans-serif; color: var(--gold); font-weight: 700; text-decoration: none; }
        
        /* BOTONES */
        .btn-kick {
            background: #53fc18; color: black; padding: 10px 20px;
            border-radius: 5px; font-weight: 900; text-decoration: none; border: none; cursor: pointer;
        }
        .user-pill {
            display: flex; align-items: center; gap: 10px; border: 1px solid var(--gold);
            padding: 5px 15px; border-radius: 50px; background: rgba(212,175,55,0.05);
        }

        /* HERO */
        .hero {
            height: 50vh; display: flex; align-items: center; justify-content: center;
            text-align: center; background: radial-gradient(circle, rgba(0,0,0,0.4), var(--black)), 
            url('https://images.unsplash.com/photo-1614850523296-d8c1af93d400?q=80&w=2070') center/cover;
        }
        .main-title { font-family: 'Syncopate', sans-serif; font-size: 4rem; background: var(--gold-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* CONTENIDO */
        .container { padding: 40px 5%; display: grid; grid-template-columns: 1.5fr 1fr; gap: 30px; }
        @media (max-width: 900px) { .container { grid-template-columns: 1fr; } }

        .box { background: var(--dark); border: 1px solid #222; padding: 25px; border-radius: 12px; }
        .gold-border { border-left: 4px solid var(--gold); padding-left: 15px; margin-bottom: 20px; }
        
        /* PUNTOS PANEL */
        .points-box { background: var(--gold-grad); color: black; padding: 30px; border-radius: 12px; text-align: center; margin-bottom: 20px; }
        .points-val { font-size: 3rem; font-weight: 900; }

        /* RECOMPENSAS */
        .reward-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; }
        .reward-item { background: #080808; border: 1px solid #222; padding: 15px; border-radius: 8px; text-align: center; transition: 0.3s; }
        .reward-item:hover { border-color: var(--gold); transform: translateY(-3px); }
    </style>
</head>
<body>

    <nav class="navbar">
        <a href="#" class="logo">GARGOLAS COMMUNITY</a>
        <div id="auth-ui">
            <button onclick="loginKick()" class="btn-kick">VINCULAR KICK</button>
        </div>
    </nav>

    <header class="hero">
        <div>
            <h1 class="main-title">GARGOLAS</h1>
            <p style="letter-spacing: 5px; color: #666;">MAUROAKD ECOSYSTEM</p>
        </div>
    </header>

    <main class="container">
        <section class="box">
            <div class="gold-border"><h2>TOP WATCHTIME</h2></div>
            <p style="color: #555;">Sincronizado con BotRix API (Simulado)</p>
            <div id="ranking-list" style="margin-top: 20px;">
                </div>
        </section>

        <aside>
            <div id="logged-view" style="display: none;">
                <div class="points-box">
                    <h3>MIS PUNTOS</h3>
                    <div class="points-val" id="user-points">0</div>
                    <p style="font-size: 0.8rem; font-weight: bold;">G√ÅRGOLA ACTIVA</p>
                </div>

                <div class="box">
                    <div class="gold-border"><h3>CANJES</h3></div>
                    <div class="reward-list">
                        <div class="reward-item"><span>üéüÔ∏è</span><br><b>Unban</b><br><small>5k pts</small></div>
                        <div class="reward-item"><span>üëë</span><br><b>VIP</b><br><small>15k pts</small></div>
                        <div class="reward-item"><span>üéÆ</span><br><b>Jugar</b><br><small>10k pts</small></div>
                    </div>
                </div>
            </div>

            <div id="guest-view" class="box" style="text-align: center;">
                <p>Inicia sesi√≥n con Kick para ver tus puntos y canjear premios del stream.</p>
            </div>
        </aside>
    </main>

    <script>
        // CONFIGURACI√ìN FIREBASE (REEMPLAZA CON TUS DATOS)
        const firebaseConfig = {
            apiKey: "AIzaSyDC3QHg-JU00vHEx2V6VHHW__O4Fzm5NEk",
            authDomain: "gargolascommunity.firebaseapp.com",
            projectId: "gargolascommunity",
            storageBucket: "gargolascommunity.firebasestorage.app",
            messagingSenderId: "462233781660",
            appId: "1:462233781660:web:70a523435c761c692df459"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // CONFIGURACI√ìN KICK
        const KICK_CLIENT_ID = 'TU_KICK_CLIENT_ID';
        const REDIRECT_URI = window.location.href.split('?')[0]; // Toma la URL actual de GitHub

        function loginKick() {
            // Mientras esperas tu Client ID, usamos Discord como puente o una simulaci√≥n segura
            const provider = new firebase.auth.OAuthProvider('discord.com');
            auth.signInWithPopup(provider).then((result) => {
                const user = result.user;
                setupUser(user);
            });
        }

        async function setupUser(user) {
            const userRef = db.collection('gargolas').doc(user.uid);
            const doc = await userRef.get();

            if (!doc.exists) {
                await userRef.set({
                    nombre: user.displayName,
                    puntos: 100,
                    avatar: user.photoURL,
                    joined: new Date()
                });
            }

            // Escuchar puntos en tiempo real
            userRef.onSnapshot(snap => {
                if(snap.exists) document.getElementById('user-points').innerText = snap.data().puntos;
            });

            document.getElementById('guest-view').style.display = 'none';
            document.getElementById('logged-view').style.display = 'block';
            document.getElementById('auth-ui').innerHTML = `
                <div class="user-pill">
                    <img src="${user.photoURL}" width="25" style="border-radius:50%">
                    <span style="color:var(--gold); font-weight:900">${user.displayName}</span>
                    <button onclick="auth.signOut().then(()=>location.reload())" style="background:none; border:none; color:white; cursor:pointer">X</button>
                </div>
            `;
        }

        // Simulaci√≥n de Ranking
        const rankingData = [
            {n: "Gargola_VIP", p: 25000},
            {n: "MauroFan", p: 18000},
            {n: "KickLover", p: 12000}
        ];

        const list = document.getElementById('ranking-list');
        rankingData.forEach((u, i) => {
            list.innerHTML += `<div style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #222">
                <span><b>${i+1}.</b> ${u.n}</span>
                <span style="color:var(--gold)">${u.p} pts</span>
            </div>`;
        });

        auth.onAuthStateChanged(user => { if(user) setupUser(user); });
    </script>
</body>
</html>
